<!doctype html>
<html lang="zh-Hans">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>用餐预订确认 — 民间粮仓</title>
<style>
  :root{
    --accent:#8a4b2a;
    --muted:#7b6a5d;
    --paper:#fffaf3;
    --bg:#f5efe8;
    --radius:14px;
    font-family: "Noto Sans SC", "PingFang SC", "Microsoft Yahei", sans-serif;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#f3ebe1);}
  .wrap{max-width:820px;margin:28px auto;padding:20px;}
  .card{
    background:linear-gradient(180deg,var(--paper),#fff);
    border-radius:18px;
    box-shadow:0 8px 30px rgba(0,0,0,0.08);
    overflow:hidden;
    border:1px solid rgba(138,75,42,0.06);
  }
  .hero{
    display:flex;
    gap:16px;
    align-items:center;
    padding:22px;
    background:
      radial-gradient(circle at 10% 10%, rgba(138,75,42,0.06), transparent 20%),
      linear-gradient(90deg, rgba(138,75,42,0.04), transparent 40%);
  }
  .logo img{ width:88px;height:88px;object-fit:cover; }
  .brand{flex:1}
  .brand h1{margin:0;font-size:18px;color:var(--accent);letter-spacing:1px;}
  .brand p{margin:6px 0 0;color:var(--muted);font-size:13px;}
  .content{padding:20px 22px 26px;}
  .row{display:flex;gap:18px;flex-wrap:wrap;margin-bottom:12px;}
  .info{
    flex:1 1 220px;
    background:#fff;border-radius:12px;padding:12px;
    border:1px dashed rgba(138,75,42,0.05);
  }
  .info h3{margin:0 0 8px;color:var(--accent);font-size:13px;}
  .info p{margin:0;color:#4b4b4b;font-size:15px;}
  .small{font-size:13px;color:var(--muted);margin-top:8px}
  .buttons{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px;}
  .btn{
    display:inline-flex;align-items:center;gap:10px;padding:10px 14px;
    border-radius:12px;background:var(--accent);color:#fff;text-decoration:none;
    font-weight:600;box-shadow:0 6px 14px rgba(138,75,42,0.12);
  }
  .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(138,75,42,0.12);box-shadow:none;font-weight:600;}
  .note{padding:14px 18px;border-top:1px solid rgba(0,0,0,0.03);background:linear-gradient(180deg,rgba(250,247,243,0.5),transparent);}
  .footer{display:flex;justify-content:space-between;align-items:center;padding:14px 22px;color:var(--muted);font-size:13px;}
  .qr{width:130px;height:130px;border-radius:0;background:transparent;display:flex;align-items:center;justify-content:center;border:none;}
  .divider{height:1px;background:linear-gradient(90deg,transparent,#eee,transparent);margin:14px 0;}

  /* 图片画廊 - 网格展示 */
  .gallery { margin-top:20px; }
  .gallery h3 { margin-bottom: 10px; }
  .gallery-grid { display:flex; flex-wrap:wrap; gap:10px; }
  .gallery-grid img {
    width: calc(33.333% - 6.66px);
    border-radius:12px;
    object-fit:cover;
    cursor:pointer;
  }
  @media (max-width:520px){
    .hero{padding:16px}
    .logo{width:72px;height:72px}
    .brand h1{font-size:16px}
    .content{padding:14px}
    .btn{padding:9px 12px}
    .gallery-grid img { width: calc(50% - 5px); }
  }

  /* Lightbox 弹窗 */
  #lightboxOverlay {
    display:none;
    position:fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    justify-content:center; align-items:center;
    z-index:9999;
    cursor: pointer;
  }
  #lightboxOverlay img {
    max-width:90%;
    max-height:90%;
    border-radius:12px;
    box-shadow:0 8px 24px rgba(0,0,0,0.3);
    cursor: default;
    opacity:0;
    transition: opacity 0.4s ease;
  }
  #lightboxOverlay img.show-img { opacity:1; }

  /* 箭头按钮 */
  #lightboxOverlay span {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    color:#fff;
    font-size:50px;
    font-weight:bold;
    cursor:pointer;
    user-select:none;
    padding:10px;
    background: rgba(0,0,0,0.3);
    border-radius:50%;
  }
  #lightboxPrev{ left:20px; }
  #lightboxNext{ right:20px; }
  #lightboxOverlay.show{ display:flex; }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="region" aria-label="用餐预订确认函">
    <!-- HERO -->
    <div class="hero">
      <div class="logo" id="logo">
        <img src="https://joane2523.github.io/MinJianV2/logo.png" alt="Logo">
      </div>
      <div class="brand">
        <h1>MinJian Granary 民间粮仓 • 马来西亚首店</h1>
        <p id="greeting">尊敬的贵宾，您好！我们已为您成功预订座位。</p>
      </div>
    </div>

    <!-- CONTENT -->
    <div class="content">
      <div class="row">
        <div class="info">
          <h3>📅 用餐日期</h3>
          <p id="date">2025年10月25日（星期六）</p>
          <div class="small">🕛 <span id="time">18:30</span></div>
        </div>

        <div class="info">
          <h3>👥 预订人数 / 包间</h3>
          <p id="guests">8-10位贵宾</p>
          <div class="small">🍽 餐位/包间编号：<strong id="table">V01</strong></div>
        </div>

        <div class="info">
          <h3>📞 门店信息</h3>
          <p>MinJian Granary 民间粮仓</p>
          <p class="small">电话：<a id="phoneLink" href="tel:0173764861">017-3764861</a></p>
          <p class="small">地址：点击导航或联系客服</p>
        </div>
      </div>

      <div class="divider"></div>

      <div style="display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap;">
        <div style="flex:1;min-width:220px">
          <h3 style="color:var(--accent);margin:0 0 10px">我们期待与您相聚</h3>
          <p id="nameLine" style="margin:0 0 8px;font-size:15px;color:#333">致：<strong id="guestName">贵宾</strong></p>
          <p style="margin:0;color:var(--muted)">若需更改人数或时间，请尽快联系我们以便为您调整座位安排。</p>

          <div class="buttons" style="margin-top:14px">
            <a class="btn" id="wazeBtn" href="#" target="_blank" rel="noopener noreferrer">🧭 Waze 一键导航</a>
            <a class="btn" id="googleBtn" href="https://www.google.com/maps/search/?api=1&query=MinJian+Granary" target="_blank">🗺 谷歌地图</a>
            <a class="btn" id="callBtn" href="tel:0173764861">📞 立即拨号</a>
          </div>
        </div>

        <div style="width:160px">
          <div class="qr" id="qrBox" title="欢迎光临">
            <img src="https://joane2523.github.io/MinJianV2/welcome.gif" alt="欢迎光临">
          </div>
        </div>
      </div>

      <!-- 图片画廊 -->
      <div class="gallery">
        <h3 style="color:var(--accent);">📸 精彩图片</h3>
        <div class="gallery-grid">
          <img src="https://joane2523.github.io/MinJianV2/image1.png" alt="图片1">
          <img src="https://joane2523.github.io/MinJianV2/image2.png" alt="图片2">
          <img src="https://joane2523.github.io/MinJianV2/image3.png" alt="图片3">
          <img src="https://joane2523.github.io/MinJianV2/image4.png" alt="图片4">
          <img src="https://joane2523.github.io/MinJianV2/image5.png" alt="图片5">
          <img src="https://joane2523.github.io/MinJianV2/image6.png" alt="图片6">
        </div>
      </div>

      <div class="note">
        <p style="margin:0;color:var(--muted);font-size:13px">
           ⚠️停车信息：本店设有停车场，建议使用停车场停放；路边停车可能被贴罚单。若需要代客泊车或有其他特殊需求，请在到店前来电告知。
        </p>
      </div>
    </div>

    <div class="footer">
      <div>店长签名：<strong style="color:var(--accent)">民间粮仓 店长</strong></div>
      <div style="text-align:right;color:var(--muted);font-size:12px">用餐愉快</div>
    </div>
  </div>
</div>

<!-- Lightbox 弹窗 -->
<div id="lightboxOverlay">
  <span id="lightboxPrev">&#10094;</span>
  <img src="" id="lightboxImg">
  <span id="lightboxNext">&#10095;</span>
</div>

<script>
const CONFIG = {
  waze: "https://waze.com/ul/hw28648432",
  phone: "0173764861",
  defaultName: "贵宾",
  defaultDate: "2025年10月25日（星期六）",
  defaultTime: "18:30",
  defaultGuests: "8-10位贵宾",
  defaultTable: "V01"
};

function getParam(k){ const params = new URLSearchParams(window.location.search); return params.get(k) || ""; }
function safeText(s){ return s ? decodeURIComponent(s) : ""; }

document.addEventListener("DOMContentLoaded", () => {
  const name = getParam('name') || CONFIG.defaultName;
  const date = getParam('date') || CONFIG.defaultDate;
  const time = getParam('time') || CONFIG.defaultTime;
  const guests = getParam('guests') || CONFIG.defaultGuests;
  const table = getParam('table') || CONFIG.defaultTable;

  document.getElementById('guestName').textContent = safeText(name);
  document.getElementById('nameLine').innerHTML = "致：<strong id='guestName2'>"+safeText(name)+"</strong>";
  document.getElementById('date').textContent = safeText(date);
  document.getElementById('time').textContent = safeText(time);
  document.getElementById('guests').textContent = safeText(guests);
  document.getElementById('table').textContent = safeText(table);

  document.getElementById('wazeBtn').href = CONFIG.waze;
  document.getElementById('callBtn').href = "tel:" + CONFIG.phone;

  // Lightbox 图片画廊
  const lightbox = document.getElementById("lightboxOverlay");
  const lightboxImg = document.getElementById("lightboxImg");
  const galleryImages = document.querySelectorAll(".gallery-grid img");
  const prevBtn = document.getElementById("lightboxPrev");
  const nextBtn = document.getElementById("lightboxNext");
  let currentIndex = 0;

  function fadeInImage(src) {
    lightboxImg.classList.remove("show-img");
    setTimeout(() => {
      lightboxImg.src = src;
      lightboxImg.onload = () => lightboxImg.classList.add("show-img");
    }, 50);
  }

  function showLightbox(index) {
    currentIndex = index;
    fadeInImage(galleryImages[currentIndex].src);
    lightbox.classList.add("show");
  }

  function hideLightbox() {
    lightbox.classList.remove("show");
    lightboxImg.classList.remove("show-img");
    lightboxImg.src = "";
  }

  function showPrev() {
    currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
    fadeInImage(galleryImages[currentIndex].src);
  }

  function showNext() {
    currentIndex = (currentIndex + 1) % galleryImages.length;
    fadeInImage(galleryImages[currentIndex].src);
  }

  galleryImages.forEach((img, i) => img.addEventListener("click", () => showLightbox(i)));
  prevBtn.addEventListener("click", (e) => { e.stopPropagation(); showPrev(); });
  nextBtn.addEventListener("click", (e) => { e.stopPropagation(); showNext(); });
  lightbox.addEventListener("click", hideLightbox);

  document.addEventListener("keydown", (e) => {
    if(!lightbox.classList.contains("show")) return;
    if(e.key === "ArrowLeft") showPrev();
    else if(e.key === "ArrowRight") showNext();
    else if(e.key === "Escape") hideLightbox();
  });
  // 移动端手指滑动切换
let startX = 0;
let endX = 0;

lightboxImg.addEventListener("touchstart", (e) => {
  startX = e.touches[0].clientX;
});

lightboxImg.addEventListener("touchmove", (e) => {
  endX = e.touches[0].clientX;
});

lightboxImg.addEventListener("touchend", () => {
  const diff = endX - startX;
  if (Math.abs(diff) > 50) { // 超过50像素才触发切换
    if (diff > 0) showPrev(); // 向右滑动显示上一张
    else showNext();           // 向左滑动显示下一张
  }
  startX = 0;
  endX = 0;
});
});
</script>
</body>
</html>
